<ion-header class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon slot="icon-only" name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Nuevo Beneficiario</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="bank-gradient-bg">
  <div class="form-container">

    <div class="form-card">
      <h3 class="form-title">Datos del Beneficiario</h3>

      <!-- Alias -->
      <div class="form-field">
        <ion-label>Alias / Nombre *</ion-label>
        <ion-input
          [value]="alias()"
          (ionInput)="alias.set($any($event).target.value)"
          placeholder="Ej: Proveedor ABC"
          type="text"
          class="custom-input">
        </ion-input>
      </div>

      <!-- Banco -->
      <div class="form-field">
        <ion-label>Banco *</ion-label>
        <ion-select
          [value]="banco()"
          (ionChange)="banco.set($any($event).detail.value)"
          placeholder="Seleccione un banco"
          interface="action-sheet"
          class="custom-input">
          @for (b of bancos; track b) {
            <ion-select-option [value]="b">{{ b }}</ion-select-option>
          }
        </ion-select>
      </div>

      <!-- Moneda -->
      <div class="form-field">
        <ion-label>Moneda *</ion-label>
        <ion-segment [value]="moneda()" (ionChange)="moneda.set($any($event).detail.value)">
          <ion-segment-button value="CRC">
            <ion-label>CRC (₡)</ion-label>
          </ion-segment-button>
          <ion-segment-button value="USD">
            <ion-label>USD ($)</ion-label>
          </ion-segment-button>
        </ion-segment>
      </div>

      <!-- Número de Cuenta -->
      <div class="form-field">
        <ion-label>Número de Cuenta *</ion-label>
        <ion-input
          [value]="numeroCuentaDestino()"
          (ionInput)="numeroCuentaDestino.set($any($event).target.value)"
          placeholder="Ej: 12345678901234"
          type="tel"
          maxlength="20"
          class="custom-input">
        </ion-input>
      </div>

      <!-- País -->
      <div class="form-field">
        <ion-label>País</ion-label>
        <ion-select
          [value]="pais()"
          (ionChange)="pais.set($any($event).detail.value)"
          placeholder="Seleccione un país"
          interface="action-sheet"
          class="custom-input">
          @for (p of paises; track p) {
            <ion-select-option [value]="p">{{ p }}</ion-select-option>
          }
        </ion-select>
      </div>

      <div class="info-note">
        <ion-icon name="information-circle-outline"></ion-icon>
        <p>El beneficiario se creará en estado "Inactivo". Deberá confirmarlo antes de poder usarlo en transferencias.</p>
      </div>
    </div>

    <div class="actions-container">
      <ion-button
        expand="block"
        [disabled]="!isFormValid() || isSubmitting()"
        (click)="confirmarCreacion()">
        @if (isSubmitting()) {
          <ion-spinner name="crescent"></ion-spinner>
        } @else {
          <ion-icon name="checkmark-outline" slot="start"></ion-icon>
          Crear Beneficiario
        }
      </ion-button>

      <ion-button expand="block" fill="clear" (click)="goBack()" [disabled]="isSubmitting()">
        Cancelar
      </ion-button>
    </div>

  </div>
</ion-content>
